{"version":3,"sources":["core/pubnub-common.js"],"names":["setup","networking","cbor","config","_config","Config","crypto","Crypto","cryptography","init","tokenManager","_tokenManager","TokenManager","telemetryManager","_telemetryManager","TelemetryManager","maximumSamplesCount","modules","PubNubFile","File","encryptFile","key","file","decryptFile","timeEndpoint","endpointCreator","bind","timeEndpointConfig","leaveEndpoint","presenceLeaveEndpointConfig","heartbeatEndpoint","presenceHeartbeatEndpointConfig","setStateEndpoint","presenceSetStateConfig","subscribeEndpoint","subscribeEndpointConfig","listenerManager","_listenerManager","ListenerManager","subscriptionManager","SubscriptionManager","getFileUrl","params","addListener","removeListener","removeAllListeners","parseToken","setToken","getToken","channelGroups","listGroups","listChannelGroupsConfig","listChannels","listChannelsInChannelGroupConfig","addChannels","addChannelsChannelGroupConfig","removeChannels","removeChannelsChannelGroupConfig","deleteGroup","deleteChannelGroupConfig","push","addPushChannelsConfig","removePushChannelsConfig","deleteDevice","removeDevicePushConfig","listPushChannelsConfig","hereNow","presenceHereNowConfig","whereNow","presenceWhereNowEndpointConfig","getState","presenceGetStateConfig","setState","adaptStateChange","iAmHere","iAmAway","setPresenceState","handshake","args","cb","channels","state","receiveMessages","timetoken","region","grant","grantEndpointConfig","grantToken","grantTokenEndpointConfig","audit","auditEndpointConfig","revokeToken","revokeTokenEndpointConfig","publish","publishEndpointConfig","fire","callback","replicate","storeInHistory","signal","signalEndpointConfig","history","historyEndpointConfig","deleteMessages","deleteMessagesEndpointConfig","messageCounts","messageCountsEndpointConfig","fetchMessages","fetchMessagesEndpointConfig","addMessageAction","addMessageActionEndpointConfig","removeMessageAction","removeMessageActionEndpointConfig","getMessageActions","getMessageActionEndpointConfig","listFiles","listFilesEndpointConfig","generateUploadUrl","generateUploadUrlEndpointConfig","publishFile","publishFileEndpointConfig","sendFile","downloadFile","downloadFileEndpointConfig","deleteFile","deleteFileEndpointConfig","objects","getAllUUIDMetadata","getAllUUIDMetadataEndpointConfig","getUUIDMetadata","getUUIDMetadataEndpointConfig","setUUIDMetadata","setUUIDMetadataEndpointConfig","removeUUIDMetadata","removeUUIDMetadataEndpointConfig","getAllChannelMetadata","getAllChannelMetadataEndpointConfig","getChannelMetadata","getChannelMetadataEndpointConfig","setChannelMetadata","setChannelMetadataEndpointConfig","removeChannelMetadata","removeChannelMetadataEndpointConfig","getChannelMembers","getMembersV2EndpointConfig","setChannelMembers","parameters","rest","call","setMembersV2EndpointConfig","type","removeChannelMembers","getMemberships","getMembershipsV2EndpointConfig","setMemberships","setMembershipsV2EndpointConfig","removeMemberships","createUser","createUserEndpointConfig","updateUser","updateUserEndpointConfig","deleteUser","deleteUserEndpointConfig","getUser","getUserEndpointConfig","getUsers","getUsersEndpointConfig","createSpace","createSpaceEndpointConfig","updateSpace","updateSpaceEndpointConfig","deleteSpace","deleteSpaceEndpointConfig","getSpaces","getSpacesEndpointConfig","getSpace","getSpaceEndpointConfig","addMembers","addMembersEndpointConfig","updateMembers","updateMembersEndpointConfig","removeMembers","removeMembersEndpointConfig","getMembers","getMembersEndpointConfig","getMembershipsEndpointConfig","joinSpaces","joinSpacesEndpointConfig","updateMemberships","updateMembershipsEndpointConfig","leaveSpaces","leaveSpacesEndpointConfig","time","subscribe","adaptSubscribeChange","presence","adaptPresenceChange","unsubscribe","adaptUnsubscribeChange","disconnect","reconnect","destroy","isOffline","unsubscribeAll","stop","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression","setHeartbeatInterval","hasModule","setProxy","proxy","getVersion","name","suffix","_addPnsdkSuffix","announceNetworkDown","restore","announceNetworkUp","title","body","NotificationsPayload","uuidGenerator","createUUID","OPERATIONS","CATEGORIES"],"mappings":"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","sourcesContent":["/** @flow */\n\nimport Config from './components/config';\nimport Crypto from './components/cryptography/index';\nimport SubscriptionManager from './components/subscription_manager';\nimport TelemetryManager from './components/telemetry_manager';\nimport NotificationsPayload from './components/push_payload';\nimport ListenerManager from './components/listener_manager';\nimport TokenManager from './components/token_manager';\n\nimport endpointCreator from './components/endpoint';\n\nimport { deprecated } from './utils';\n\nimport * as addChannelsChannelGroupConfig from './endpoints/channel_groups/add_channels';\nimport * as removeChannelsChannelGroupConfig from './endpoints/channel_groups/remove_channels';\nimport * as deleteChannelGroupConfig from './endpoints/channel_groups/delete_group';\nimport * as listChannelGroupsConfig from './endpoints/channel_groups/list_groups';\nimport * as listChannelsInChannelGroupConfig from './endpoints/channel_groups/list_channels';\n\nimport * as addPushChannelsConfig from './endpoints/push/add_push_channels';\nimport * as removePushChannelsConfig from './endpoints/push/remove_push_channels';\nimport * as listPushChannelsConfig from './endpoints/push/list_push_channels';\nimport * as removeDevicePushConfig from './endpoints/push/remove_device';\n\nimport * as presenceLeaveEndpointConfig from './endpoints/presence/leave';\nimport * as presenceWhereNowEndpointConfig from './endpoints/presence/where_now';\nimport * as presenceHeartbeatEndpointConfig from './endpoints/presence/heartbeat';\nimport * as presenceGetStateConfig from './endpoints/presence/get_state';\nimport * as presenceSetStateConfig from './endpoints/presence/set_state';\nimport * as presenceHereNowConfig from './endpoints/presence/here_now';\n\n// Actions API\n\nimport * as addMessageActionEndpointConfig from './endpoints/actions/add_message_action';\nimport * as removeMessageActionEndpointConfig from './endpoints/actions/remove_message_action';\nimport * as getMessageActionEndpointConfig from './endpoints/actions/get_message_actions';\n\n// File Upload API v1\n\nimport { IFile, FileClass } from '../file';\n\nimport * as fileUploadTypes from './endpoints/file_upload/types';\n\nimport listFilesEndpointConfig from './endpoints/file_upload/list_files';\nimport generateUploadUrlEndpointConfig from './endpoints/file_upload/generate_upload_url';\nimport publishFileEndpointConfig from './endpoints/file_upload/publish_file';\nimport sendFileFunction from './endpoints/file_upload/send_file';\nimport getFileUrlFunction from './endpoints/file_upload/get_file_url';\nimport downloadFileEndpointConfig from './endpoints/file_upload/download_file';\nimport deleteFileEndpointConfig from './endpoints/file_upload/delete_file';\n\n// Object API v2\nimport getAllUUIDMetadataEndpointConfig, {\n  type GetAllUUIDMetadataParams,\n  type GetAllUUIDMetadataResult,\n} from './endpoints/objects/uuid/get_all';\n\nimport getUUIDMetadataEndpointConfig, {\n  type GetUUIDMetadataParams,\n  type GetUUIDMetadataResult,\n} from './endpoints/objects/uuid/get';\n\nimport setUUIDMetadataEndpointConfig, {\n  type SetUUIDMetadataParams,\n  type SetUUIDMetadataResult,\n} from './endpoints/objects/uuid/set';\n\nimport removeUUIDMetadataEndpointConfig, {\n  type RemoveUUIDMetadataParams,\n  type RemoveUUIDMetadataResult,\n} from './endpoints/objects/uuid/remove';\n\nimport getAllChannelMetadataEndpointConfig, {\n  type GetAllChannelMetadataParams,\n  type GetAllChannelMetadataResult,\n} from './endpoints/objects/channel/get_all';\n\nimport getChannelMetadataEndpointConfig, {\n  type GetChannelMetadataParams,\n  type GetChannelMetadataResult,\n} from './endpoints/objects/channel/get';\n\nimport setChannelMetadataEndpointConfig, {\n  type SetChannelMetadataParams,\n  type SetChannelMetadataResult,\n} from './endpoints/objects/channel/set';\n\nimport removeChannelMetadataEndpointConfig, {\n  type RemoveChannelMetadataParams,\n  type RemoveChannelMetadataResult,\n} from './endpoints/objects/channel/remove';\n\nimport getMembersV2EndpointConfig, {\n  type GetMembersParams,\n  type GetMembersResult,\n} from './endpoints/objects/member/get';\n\nimport setMembersV2EndpointConfig, {\n  type UpsertMembersParams,\n  type RemoveMembersParams,\n  type SetMembersResult,\n} from './endpoints/objects/member/set';\n\nimport getMembershipsV2EndpointConfig, {\n  type GetMembershipsParams,\n  type GetMembershipsResult,\n} from './endpoints/objects/membership/get';\n\nimport setMembershipsV2EndpointConfig, {\n  type UpsertMembershipsParams,\n  type RemoveMembershipsParams,\n  type SetMembershipsResult,\n} from './endpoints/objects/membership/set';\n\n// Objects API\n\nimport * as createUserEndpointConfig from './endpoints/users/create_user';\nimport * as updateUserEndpointConfig from './endpoints/users/update_user';\nimport * as deleteUserEndpointConfig from './endpoints/users/delete_user';\nimport * as getUserEndpointConfig from './endpoints/users/get_user';\nimport * as getUsersEndpointConfig from './endpoints/users/get_users';\nimport * as createSpaceEndpointConfig from './endpoints/spaces/create_space';\nimport * as updateSpaceEndpointConfig from './endpoints/spaces/update_space';\nimport * as deleteSpaceEndpointConfig from './endpoints/spaces/delete_space';\nimport * as getSpacesEndpointConfig from './endpoints/spaces/get_spaces';\nimport * as getSpaceEndpointConfig from './endpoints/spaces/get_space';\nimport * as getMembersEndpointConfig from './endpoints/memberships/get_members';\nimport * as addMembersEndpointConfig from './endpoints/memberships/add_members';\nimport * as updateMembersEndpointConfig from './endpoints/memberships/update_members';\nimport * as removeMembersEndpointConfig from './endpoints/memberships/remove_members';\nimport * as getMembershipsEndpointConfig from './endpoints/memberships/get_memberships';\nimport * as updateMembershipsEndpointConfig from './endpoints/memberships/update_memberships';\nimport * as joinSpacesEndpointConfig from './endpoints/memberships/join_spaces';\nimport * as leaveSpacesEndpointConfig from './endpoints/memberships/leave_spaces';\n\nimport * as auditEndpointConfig from './endpoints/access_manager/audit';\nimport * as grantEndpointConfig from './endpoints/access_manager/grant';\nimport * as grantTokenEndpointConfig from './endpoints/access_manager/grant_token';\nimport revokeTokenEndpointConfig, {\n  type RevokeTokenParams,\n  type RevokeTokenResult,\n} from './endpoints/access_manager/revoke_token';\n\nimport * as publishEndpointConfig from './endpoints/publish';\nimport * as signalEndpointConfig from './endpoints/signal';\nimport * as historyEndpointConfig from './endpoints/history/get_history';\nimport * as deleteMessagesEndpointConfig from './endpoints/history/delete_messages';\nimport * as messageCountsEndpointConfig from './endpoints/history/message_counts';\nimport * as fetchMessagesEndpointConfig from './endpoints/fetch_messages';\nimport * as timeEndpointConfig from './endpoints/time';\nimport * as subscribeEndpointConfig from './endpoints/subscribe';\n\nimport OPERATIONS from './constants/operations';\nimport CATEGORIES from './constants/categories';\n\nimport { InternalSetupStruct } from './flow_interfaces';\nimport uuidGenerator from './components/uuid';\n\ntype CallbackStatus = {|\n  error: boolean,\n  operation: string,\n  statusCode: number,\n|};\n\nexport default class {\n  _config: Config;\n  _telemetryManager: TelemetryManager;\n  _listenerManager: ListenerManager;\n  _tokenManager: TokenManager;\n\n  // tell flow about the mounted endpoint\n  time: Function;\n  publish: Function;\n  fire: Function;\n\n  history: Function;\n  deleteMessages: Function;\n  messageCounts: Function;\n  fetchMessages: Function;\n\n  //\n  channelGroups: Object;\n  //\n  push: Object;\n  //\n  hereNow: Function;\n  whereNow: Function;\n  getState: Function;\n  setState: Function;\n  // presence utility methods\n  iAmHere: Function;\n  iAmAway: Function;\n  setPresenceState: Function;\n\n  // subscription utility methods\n  handshake: Function;\n  receiveMessages: Function;\n\n  //\n  grant: Function;\n  grantToken: Function;\n  audit: Function;\n  revokeToken: (\n    parameters: RevokeTokenParams,\n    callback?: (status: CallbackStatus, result: RevokeTokenResult) => void\n  ) => Promise<RevokeTokenResult>;\n  //\n  subscribe: Function;\n  signal: Function;\n  presence: Function;\n  unsubscribe: Function;\n  unsubscribeAll: Function;\n\n  // Actions API\n  addMessageAction: Function;\n  removeMessageAction: Function;\n  getMessageActions: Function;\n\n  // File Upload API v1\n\n  File: FileClass;\n  encryptFile: (key: string, file: IFile) => Promise<IFile>;\n  decryptFile: (key: string, file: IFile) => Promise<IFile>;\n\n  listFiles: (\n    parameters: fileUploadTypes.ListFilesParams,\n    callback?: (status: CallbackStatus, result: fileUploadTypes.ListFilesResult) => void\n  ) => Promise<fileUploadTypes.ListFilesResult>;\n  sendFile: (\n    parameters: fileUploadTypes.SendFileParams,\n    callback?: (status: CallbackStatus, result: fileUploadTypes.SendFileResult) => void\n  ) => Promise<fileUploadTypes.SendFileResult>;\n  downloadFile: (\n    parameters: fileUploadTypes.DownloadFileParams,\n    callback?: (status: CallbackStatus, result: fileUploadTypes.DownloadFileResult) => void\n  ) => Promise<fileUploadTypes.DownloadFileResult>;\n  getFileUrl: (parameters: fileUploadTypes.GetFileUrlParams) => fileUploadTypes.GetFileUrlResult;\n  deleteFile: (\n    parameters: fileUploadTypes.DeleteFileParams,\n    callback?: (status: CallbackStatus, result: fileUploadTypes.DeleteFileResult) => void\n  ) => Promise<fileUploadTypes.DeleteFileResult>;\n  publishFile: (\n    parameters: fileUploadTypes.PublishFileParams,\n    callback?: (status: CallbackStatus, result: fileUploadTypes.PublishFileResult) => void\n  ) => Promise<fileUploadTypes.PublishFileResult>;\n\n  // Objects API v2\n\n  objects: {\n    getAllUUIDMetadata: (\n      parameters?: GetAllUUIDMetadataParams,\n      cb?: (status: CallbackStatus, result: GetAllUUIDMetadataResult) => void\n    ) => Promise<GetAllUUIDMetadataResult>,\n    getUUIDMetadata: (\n      parameters?: GetUUIDMetadataParams,\n      cb?: (status: CallbackStatus, result: GetUUIDMetadataResult) => void\n    ) => Promise<GetUUIDMetadataResult>,\n    setUUIDMetadata: (\n      parameters: SetUUIDMetadataParams,\n      cb?: (status: CallbackStatus, result: SetUUIDMetadataResult) => void\n    ) => Promise<SetUUIDMetadataResult>,\n    removeUUIDMetadata: (\n      parameters?: RemoveUUIDMetadataParams,\n      cb?: (status: CallbackStatus, result: RemoveUUIDMetadataResult) => void\n    ) => Promise<RemoveUUIDMetadataResult>,\n\n    getAllChannelMetadata: (\n      parameters?: GetAllChannelMetadataParams,\n      cb?: (status: CallbackStatus, result: GetAllChannelMetadataResult) => void\n    ) => Promise<GetAllChannelMetadataResult>,\n    getChannelMetadata: (\n      parameters: GetChannelMetadataParams,\n      cb?: (status: CallbackStatus, result: GetChannelMetadataResult) => void\n    ) => Promise<GetChannelMetadataResult>,\n    setChannelMetadata: (\n      parameters: SetChannelMetadataParams,\n      cb?: (status: CallbackStatus, result: SetChannelMetadataResult) => void\n    ) => Promise<SetChannelMetadataResult>,\n    removeChannelMetadata: (\n      parameters: RemoveChannelMetadataParams,\n      cb?: (status: CallbackStatus, result: RemoveChannelMetadataResult) => void\n    ) => Promise<RemoveChannelMetadataResult>,\n\n    getMemberships: (\n      parameters: GetMembershipsParams,\n      cb?: (status: CallbackStatus, result: GetMembershipsResult) => void\n    ) => Promise<GetMembershipsResult>,\n    setMemberships: (\n      parameters: $Diff<UpsertMembershipsParams, {| type: string |}>,\n      cb?: (status: CallbackStatus, result: SetMembershipsResult) => void\n    ) => Promise<SetMembershipsResult>,\n    removeMemberships: (\n      parameters: $Diff<RemoveMembershipsParams, {| type: string |}>,\n      cb?: (status: CallbackStatus, result: SetMembershipsResult) => void\n    ) => Promise<SetMembershipsResult>,\n\n    getChannelMembers: (\n      parameters: GetMembersParams,\n      cb?: (status: CallbackStatus, result: GetMembersResult) => void\n    ) => Promise<GetMembersResult>,\n    setChannelMembers: (\n      parameters: $Diff<UpsertMembersParams, {| type: string |}>,\n      cb?: (status: CallbackStatus, result: SetMembersResult) => void\n    ) => Promise<SetMembersResult>,\n    removeChannelMembers: (\n      parameters: $Diff<RemoveMembersParams, {| type: string |}>,\n      cb?: (status: CallbackStatus, result: SetMembersResult) => void\n    ) => Promise<SetMembersResult>,\n  };\n\n  // Objects API\n\n  createUser: Function;\n  updateUser: Function;\n  deleteUser: Function;\n  getUser: Function;\n  getUsers: Function;\n  createSpace: Function;\n  updateSpace: Function;\n  deleteSpace: Function;\n  getSpaces: Function;\n  getSpace: Function;\n  getMembers: Function;\n  addMembers: Function;\n  updateMembers: Function;\n  removeMembers: Function;\n  getMemberships: Function;\n  joinSpaces: Function;\n  updateMemberships: Function;\n  leaveSpaces: Function;\n\n  disconnect: Function;\n  reconnect: Function;\n\n  destroy: Function;\n  stop: Function;\n\n  getSubscribedChannels: Function;\n  getSubscribedChannelGroups: Function;\n\n  addListener: Function;\n  removeListener: Function;\n  removeAllListeners: Function;\n\n  parseToken: Function;\n  setToken: Function;\n  getToken: Function;\n\n  getAuthKey: Function;\n  setAuthKey: Function;\n\n  setCipherKey: Function;\n  setUUID: Function;\n  getUUID: Function;\n\n  getFilterExpression: Function;\n  setFilterExpression: Function;\n\n  setHeartbeatInterval: Function;\n\n  setProxy: Function;\n\n  encrypt: Function;\n  decrypt: Function;\n\n  //\n\n  constructor(setup: InternalSetupStruct) {\n    let { networking, cbor } = setup;\n\n    const config = (this._config = new Config({ setup }));\n    const crypto = new Crypto({ config }); // LEGACY\n\n    const cryptography = setup.cryptography;\n\n    networking.init(config);\n\n    const tokenManager = (this._tokenManager = new TokenManager(config, cbor));\n    const telemetryManager = (this._telemetryManager = new TelemetryManager({\n      maximumSamplesCount: 60000,\n    }));\n\n    let modules = {\n      config,\n      networking,\n      crypto,\n      cryptography,\n      tokenManager,\n      telemetryManager,\n      PubNubFile: setup.PubNubFile,\n    };\n\n    this.File = setup.PubNubFile;\n\n    this.encryptFile = (key, file) => cryptography.encryptFile(key, file, this.File);\n    this.decryptFile = (key, file) => cryptography.decryptFile(key, file, this.File);\n\n    const timeEndpoint = endpointCreator.bind(this, modules, timeEndpointConfig);\n    const leaveEndpoint = endpointCreator.bind(this, modules, presenceLeaveEndpointConfig);\n    const heartbeatEndpoint = endpointCreator.bind(this, modules, presenceHeartbeatEndpointConfig);\n    const setStateEndpoint = endpointCreator.bind(this, modules, presenceSetStateConfig);\n    const subscribeEndpoint = endpointCreator.bind(this, modules, subscribeEndpointConfig);\n\n    // managers\n    const listenerManager = (this._listenerManager = new ListenerManager());\n\n    const subscriptionManager = new SubscriptionManager({\n      timeEndpoint,\n      leaveEndpoint,\n      heartbeatEndpoint,\n      setStateEndpoint,\n      subscribeEndpoint,\n      crypto: modules.crypto,\n      config: modules.config,\n      listenerManager,\n      getFileUrl: (params) => getFileUrlFunction(modules, params),\n    });\n\n    this.addListener = listenerManager.addListener.bind(listenerManager);\n    this.removeListener = listenerManager.removeListener.bind(listenerManager);\n    this.removeAllListeners = listenerManager.removeAllListeners.bind(listenerManager);\n\n    this.parseToken = tokenManager.parseToken.bind(tokenManager);\n    this.setToken = tokenManager.setToken.bind(tokenManager);\n    this.getToken = tokenManager.getToken.bind(tokenManager);\n\n    /* channel groups */\n    this.channelGroups = {\n      listGroups: endpointCreator.bind(this, modules, listChannelGroupsConfig),\n      listChannels: endpointCreator.bind(this, modules, listChannelsInChannelGroupConfig),\n      addChannels: endpointCreator.bind(this, modules, addChannelsChannelGroupConfig),\n      removeChannels: endpointCreator.bind(this, modules, removeChannelsChannelGroupConfig),\n      deleteGroup: endpointCreator.bind(this, modules, deleteChannelGroupConfig),\n    };\n    /* push */\n    this.push = {\n      addChannels: endpointCreator.bind(this, modules, addPushChannelsConfig),\n      removeChannels: endpointCreator.bind(this, modules, removePushChannelsConfig),\n      deleteDevice: endpointCreator.bind(this, modules, removeDevicePushConfig),\n      listChannels: endpointCreator.bind(this, modules, listPushChannelsConfig),\n    };\n    /* presence */\n    this.hereNow = endpointCreator.bind(this, modules, presenceHereNowConfig);\n    this.whereNow = endpointCreator.bind(this, modules, presenceWhereNowEndpointConfig);\n    this.getState = endpointCreator.bind(this, modules, presenceGetStateConfig);\n    this.setState = subscriptionManager.adaptStateChange.bind(subscriptionManager);\n\n    /* presence utilities */\n    this.iAmHere = endpointCreator.bind(this, modules, presenceHeartbeatEndpointConfig);\n    this.iAmAway = endpointCreator.bind(this, modules, presenceLeaveEndpointConfig);\n    this.setPresenceState = endpointCreator.bind(this, modules, presenceSetStateConfig);\n\n    /* subscription utilities */\n    this.handshake  = (args, cb) => subscribeEndpoint({ channels: args.channels, channelGroups: args.channelGroups, state: {} }, cb);\n    this.receiveMessages = (args, cb) => subscribeEndpoint({\n      channels: args.channels,\n      channelGroups: args.channelGroups,\n      timetoken: args.timetoken,\n      region: args.region,\n      state: {},\n    }, cb);\n\n    /* PAM */\n    this.grant = endpointCreator.bind(this, modules, grantEndpointConfig);\n    this.grantToken = endpointCreator.bind(this, modules, grantTokenEndpointConfig);\n    this.audit = endpointCreator.bind(this, modules, auditEndpointConfig);\n    this.revokeToken = endpointCreator.bind(this, modules, revokeTokenEndpointConfig);\n    //\n    this.publish = endpointCreator.bind(this, modules, publishEndpointConfig);\n\n    this.fire = (args, callback) => {\n      args.replicate = false;\n      args.storeInHistory = false;\n      return this.publish(args, callback);\n    };\n\n    this.signal = endpointCreator.bind(this, modules, signalEndpointConfig);\n\n    this.history = endpointCreator.bind(this, modules, historyEndpointConfig);\n    this.deleteMessages = endpointCreator.bind(this, modules, deleteMessagesEndpointConfig);\n    this.messageCounts = endpointCreator.bind(this, modules, messageCountsEndpointConfig);\n    this.fetchMessages = endpointCreator.bind(this, modules, fetchMessagesEndpointConfig);\n\n    // Actions API\n\n    this.addMessageAction = endpointCreator.bind(this, modules, addMessageActionEndpointConfig);\n\n    this.removeMessageAction = endpointCreator.bind(this, modules, removeMessageActionEndpointConfig);\n\n    this.getMessageActions = endpointCreator.bind(this, modules, getMessageActionEndpointConfig);\n\n    // File Upload API v1\n\n    this.listFiles = endpointCreator.bind(this, modules, listFilesEndpointConfig);\n\n    const generateUploadUrl = endpointCreator.bind(this, modules, generateUploadUrlEndpointConfig);\n    this.publishFile = endpointCreator.bind(this, modules, publishFileEndpointConfig);\n\n    this.sendFile = sendFileFunction({\n      generateUploadUrl,\n      publishFile: this.publishFile,\n      modules,\n    });\n\n    this.getFileUrl = (params) => getFileUrlFunction(modules, params);\n\n    this.downloadFile = endpointCreator.bind(this, modules, downloadFileEndpointConfig);\n\n    this.deleteFile = endpointCreator.bind(this, modules, deleteFileEndpointConfig);\n\n    // Objects API v2\n\n    this.objects = {\n      getAllUUIDMetadata: endpointCreator.bind(this, modules, getAllUUIDMetadataEndpointConfig),\n      getUUIDMetadata: endpointCreator.bind(this, modules, getUUIDMetadataEndpointConfig),\n      setUUIDMetadata: endpointCreator.bind(this, modules, setUUIDMetadataEndpointConfig),\n      removeUUIDMetadata: endpointCreator.bind(this, modules, removeUUIDMetadataEndpointConfig),\n\n      getAllChannelMetadata: endpointCreator.bind(this, modules, getAllChannelMetadataEndpointConfig),\n      getChannelMetadata: endpointCreator.bind(this, modules, getChannelMetadataEndpointConfig),\n      setChannelMetadata: endpointCreator.bind(this, modules, setChannelMetadataEndpointConfig),\n      removeChannelMetadata: endpointCreator.bind(this, modules, removeChannelMetadataEndpointConfig),\n\n      getChannelMembers: endpointCreator.bind(this, modules, getMembersV2EndpointConfig),\n      setChannelMembers: (parameters: $Diff<UpsertMembersParams, {| type: string |}>, ...rest) =>\n        endpointCreator.call(\n          this,\n          modules,\n          setMembersV2EndpointConfig,\n          {\n            type: 'set',\n            ...parameters,\n          },\n          ...rest\n        ),\n      removeChannelMembers: (parameters: $Diff<RemoveMembersParams, {| type: string |}>, ...rest) =>\n        endpointCreator.call(\n          this,\n          modules,\n          setMembersV2EndpointConfig,\n          {\n            type: 'delete',\n            ...parameters,\n          },\n          ...rest\n        ),\n\n      getMemberships: endpointCreator.bind(this, modules, getMembershipsV2EndpointConfig),\n      setMemberships: (parameters: $Diff<UpsertMembershipsParams, {| type: string |}>, ...rest) =>\n        endpointCreator.call(\n          this,\n          modules,\n          setMembershipsV2EndpointConfig,\n          {\n            type: 'set',\n            ...parameters,\n          },\n          ...rest\n        ),\n      removeMemberships: (parameters: $Diff<RemoveMembershipsParams, {| type: string |}>, ...rest) =>\n        endpointCreator.call(\n          this,\n          modules,\n          setMembershipsV2EndpointConfig,\n          {\n            type: 'delete',\n            ...parameters,\n          },\n          ...rest\n        ),\n    };\n\n    // Objects API\n\n    this.createUser = deprecated(endpointCreator.bind(this, modules, createUserEndpointConfig));\n\n    this.updateUser = deprecated(endpointCreator.bind(this, modules, updateUserEndpointConfig));\n\n    this.deleteUser = deprecated(endpointCreator.bind(this, modules, deleteUserEndpointConfig));\n\n    this.getUser = deprecated(endpointCreator.bind(this, modules, getUserEndpointConfig));\n\n    this.getUsers = deprecated(endpointCreator.bind(this, modules, getUsersEndpointConfig));\n\n    this.createSpace = deprecated(endpointCreator.bind(this, modules, createSpaceEndpointConfig));\n\n    this.updateSpace = deprecated(endpointCreator.bind(this, modules, updateSpaceEndpointConfig));\n\n    this.deleteSpace = deprecated(endpointCreator.bind(this, modules, deleteSpaceEndpointConfig));\n\n    this.getSpaces = deprecated(endpointCreator.bind(this, modules, getSpacesEndpointConfig));\n\n    this.getSpace = deprecated(endpointCreator.bind(this, modules, getSpaceEndpointConfig));\n\n    this.addMembers = deprecated(endpointCreator.bind(this, modules, addMembersEndpointConfig));\n\n    this.updateMembers = deprecated(endpointCreator.bind(this, modules, updateMembersEndpointConfig));\n\n    this.removeMembers = deprecated(endpointCreator.bind(this, modules, removeMembersEndpointConfig));\n\n    this.getMembers = deprecated(endpointCreator.bind(this, modules, getMembersEndpointConfig));\n\n    this.getMemberships = deprecated(endpointCreator.bind(this, modules, getMembershipsEndpointConfig));\n\n    this.joinSpaces = deprecated(endpointCreator.bind(this, modules, joinSpacesEndpointConfig));\n\n    this.updateMemberships = deprecated(endpointCreator.bind(this, modules, updateMembershipsEndpointConfig));\n\n    this.leaveSpaces = deprecated(endpointCreator.bind(this, modules, leaveSpacesEndpointConfig));\n\n    this.time = timeEndpoint;\n\n    // subscription related methods\n    this.subscribe = subscriptionManager.adaptSubscribeChange.bind(subscriptionManager);\n    this.presence = subscriptionManager.adaptPresenceChange.bind(subscriptionManager);\n    this.unsubscribe = subscriptionManager.adaptUnsubscribeChange.bind(subscriptionManager);\n    this.disconnect = subscriptionManager.disconnect.bind(subscriptionManager);\n    this.reconnect = subscriptionManager.reconnect.bind(subscriptionManager);\n\n    this.destroy = (isOffline: boolean) => {\n      subscriptionManager.unsubscribeAll(isOffline);\n      subscriptionManager.disconnect();\n    };\n\n    // --- deprecated  ------------------\n    this.stop = this.destroy; // --------\n    // --- deprecated  ------------------\n\n    this.unsubscribeAll = subscriptionManager.unsubscribeAll.bind(subscriptionManager);\n\n    this.getSubscribedChannels = subscriptionManager.getSubscribedChannels.bind(subscriptionManager);\n    this.getSubscribedChannelGroups = subscriptionManager.getSubscribedChannelGroups.bind(subscriptionManager);\n\n    // mount crypto\n    this.encrypt = crypto.encrypt.bind(crypto);\n    this.decrypt = crypto.decrypt.bind(crypto);\n\n    /* config */\n    this.getAuthKey = modules.config.getAuthKey.bind(modules.config);\n    this.setAuthKey = modules.config.setAuthKey.bind(modules.config);\n    this.setCipherKey = modules.config.setCipherKey.bind(modules.config);\n    this.getUUID = modules.config.getUUID.bind(modules.config);\n    this.setUUID = modules.config.setUUID.bind(modules.config);\n    this.getFilterExpression = modules.config.getFilterExpression.bind(modules.config);\n    this.setFilterExpression = modules.config.setFilterExpression.bind(modules.config);\n\n    this.setHeartbeatInterval = modules.config.setHeartbeatInterval.bind(modules.config);\n\n    if (networking.hasModule('proxy')) {\n      this.setProxy = (proxy) => {\n        modules.config.setProxy(proxy);\n        this.reconnect();\n      };\n    }\n  }\n\n  getVersion(): string {\n    return this._config.getVersion();\n  }\n\n  _addPnsdkSuffix(name: string, suffix: string) {\n    this._config._addPnsdkSuffix(name, suffix);\n  }\n\n  // network hooks to indicate network changes\n  networkDownDetected() {\n    this._listenerManager.announceNetworkDown();\n\n    if (this._config.restore) {\n      this.disconnect();\n    } else {\n      this.destroy(true);\n    }\n  }\n\n  networkUpDetected() {\n    this._listenerManager.announceNetworkUp();\n    this.reconnect();\n  }\n\n  static notificationPayload(title: ?string, body: ?string): NotificationsPayload {\n    return new NotificationsPayload(title, body);\n  }\n\n  static generateUUID(): string {\n    return uuidGenerator.createUUID();\n  }\n\n  static OPERATIONS = OPERATIONS;\n  static CATEGORIES = CATEGORIES;\n}\n"],"file":"pubnub-common.js"}